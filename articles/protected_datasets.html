<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Protected Data Sources • amadeus</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Protected Data Sources">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">amadeus</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/download_functions.html">download_data</a></li>
    <li><a class="dropdown-item" href="../articles/epa_download.html">Downloading EPA Daily Data</a></li>
    <li><a class="dropdown-item" href="../articles/protected_datasets.html">Protected Data Sources</a></li>
    <li><a class="dropdown-item" href="../articles/workflow.html">amadeus workflow</a></li>
  </ul>
</li>
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/NIEHS/amadeus/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Protected Data Sources</h1>
                        <h4 data-toc-skip class="author">Mitchell
Manware</h4>
            
            <h4 data-toc-skip class="date">2024-07-09</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/NIEHS/amadeus/blob/main/vignettes/protected_datasets.Rmd" class="external-link"><code>vignettes/protected_datasets.Rmd</code></a></small>
      <div class="d-none name"><code>protected_datasets.Rmd</code></div>
    </div>

    
    
<p>The <code>download_data</code> function from <code>amadeus</code>
provides access to a variety of publicly available environmental data
sources. Although publicly available, certain data sources are protected
and require users to provide login credentials before accessing and
downloading the data. Datasets from the National Aeronautics and Space
Administration (NASA), for example, require users to have and provide
credentials for a NASA EarthData account. Manually downloading data from
the web while logged into a NASA EarthData Account will automatically
reference the user’s credentials, but accessing data via the
<code>download_data</code> function requires “prerequiste files” which
store user credentials.</p>
<div class="section level2">
<h2 id="motivation">Motivation<a class="anchor" aria-label="anchor" href="#motivation"></a>
</h2>
<p>This vignette will demonstrate how to create and log into a NASA
EarthData Account, and how to generate the prerequisite files with R
code.</p>
</div>
<div class="section level2">
<h2 id="nasa-earthdata-account">NASA EarthData Account<a class="anchor" aria-label="anchor" href="#nasa-earthdata-account"></a>
</h2>
<p>Visit <a href="https://urs.earthdata.nasa.gov/" class="external-link">https://urs.earthdata.nasa.gov/</a>
to register for or log into a NASA EarthData account.</p>
<div class="float">
<img src="images/NASA_EarthData_login.png" alt="NASA EarthData Account Landing Page"><div class="figcaption">NASA EarthData Account Landing Page</div>
</div>
<p>Account registration provides access to NASA’s Earth Observing System
Data and Information System (EOSDIS) and its twelve Distributed Active
Archive Centers (DAAC), including:</p>
<ul>
<li>Alaska Satellite Facility (ASF) DAAC</li>
<li>Atmospheric Science Data Center (ASDC)</li>
<li>Crustal Dynamics Data Information System (CDDIS)</li>
<li>Global Hydrometeorology Resource Center (GHRC)</li>
<li>Goddard Earth Sciences Data and Information Services Center (GES
DISC)</li>
<li>Land Processes DAAC (LP DAAC)</li>
<li>Level 1 and Atmosphere Archive and Distribution System (LAADS)
DAAC</li>
<li>National Snow and Ice Data Center (NSIDC) DAAC</li>
<li>Oak Ridge National Laboratory (ORNL) DAAC</li>
<li>Ocean Biology DAAC (OB.DAAC)</li>
<li>Physical Oceanography DAAC (PO.DAAC)</li>
<li>Socioeconomic Data and Applications Center (SEDAC)</li>
</ul>
<p>See <a href="https://www.earthdata.nasa.gov/eosdis/daacs" class="external-link uri">https://www.earthdata.nasa.gov/eosdis/daacs</a> for more
information.</p>
<div class="section level3">
<h3 id="approved-applications">Approved applications<a class="anchor" aria-label="anchor" href="#approved-applications"></a>
</h3>
<p>After creating an account, navigate to “My Profile”(<a href="https://urs.earthdata.nasa.gov/profile" class="external-link uri">https://urs.earthdata.nasa.gov/profile</a>), and then to
“Applications &gt; Authorized Apps”. This “Authorized Apps” page
specifies which NASA EarthData applications can use your login
credentials. For this example, ensure that authorization is enabled for
“SEDAC Website”, “SEDAC Website (Alpha)”, and “SEDAC Website
(Beta)”.</p>
<div class="float">
<img src="images/NASA_EarthData_applications.png" alt="NASA EarthData Approved Applications"><div class="figcaption">NASA EarthData Approved Applications</div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="prerequisite-files">Prerequisite files<a class="anchor" aria-label="anchor" href="#prerequisite-files"></a>
</h2>
<p>With a NASA EarthData Account and the required applications
authorized to use the credentials, it is time to create the prerequisite
files. The following examples will utilize the <a href="https://sedac.ciesin.columbia.edu/data/collection/gpw-v4/united-nations-adjusted" class="external-link">UN
WPP-Adjusted population density data from NASA Socioeconomic Data and
Applications Center (SEDAC)</a>.</p>
<p>Before generating the prerequisite, try to download the population
data with <code>download_data</code>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/download_data.html">download_data</a></span><span class="op">(</span></span>
<span>  dataset_name <span class="op">=</span> <span class="st">"sedac_population"</span>,</span>
<span>  year <span class="op">=</span> <span class="st">"2020"</span>,</span>
<span>  data_format <span class="op">=</span> <span class="st">"GeoTIFF"</span>,</span>
<span>  data_resolution <span class="op">=</span> <span class="st">"60 minute"</span>,</span>
<span>  directory_to_save <span class="op">=</span> <span class="st">"./sedac_population"</span>,</span>
<span>  acknowledgement <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  download <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  unzip <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  remove_zip <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  remove_command <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Downloading requested files...</span></span>
<span><span class="co">## Requested files have been downloaded.</span></span>
<span><span class="co">## Unzipping files...</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Warning in unzip(file_name, exdir = directory_to_unzip): error 1 in extracting from zip file</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Files unzipped and saved in ./sedac_population/.</span></span></code></pre>
<p>As the error message indicates, the downloaded file cannot be
unzipped because the data file was not accessed properly. To be able to
download protected NASA data with <code>download_data</code>, the
<code>.netrc</code>, <code>.urs_cookies</code>, and <code>.dodsrc</code>
must be generated.</p>
<p><strong>Note</strong> The following code has been adopted from <a href="https://disc.gsfc.nasa.gov/information/howto?title=How%20to%20Generate%20Earthdata%20Prerequisite%20Files" class="external-link">How
to Generate Earthdata Prerequisite Files</a> on NASA GES DISC’s <a href="https://disc.gsfc.nasa.gov/information/howto" class="external-link">“How-To’s”
webpage</a>.</p>
<p><strong>The folowing steps assume a Mac or Linux operating system.
Instructions for generating prerequisite files on Windows operating
system in R is being developed.</strong></p>
<div class="section level3">
<h3 id="netrc">
<code>.netrc</code><a class="anchor" aria-label="anchor" href="#netrc"></a>
</h3>
<p>The following commands create the <code>.netrc</code> file, which
contains your NASA EarthData Account credentials.</p>
<p>First, set your working directory to the home directory.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="st">"~/"</span><span class="op">)</span></span></code></pre></div>
<p>Create a file named <code>.netrc</code> with
<code>file.create</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.create</a></span><span class="op">(</span><span class="st">".netrc"</span><span class="op">)</span></span></code></pre></div>
<p>Open a connection to <code>.netrc</code> with <code>sink</code>.
Write the line <code>machine urs...</code> replacing
<code>YOUR_USERNAME</code> and <code>YOUR_PASSWORD</code> with your NASA
EarthData username and password, respectively. After writing the line,
close the connection with <code>sink</code> again.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/sink.html" class="external-link">sink</a></span><span class="op">(</span><span class="st">".netrc"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span></span>
<span>  <span class="st">"machine urs.earthdata.nasa.gov login YOUR_USERNAME password YOUR_PASSWORD"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sink.html" class="external-link">sink</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Edit the settings so only you, the owner of the file, can read and
write <code>.netrc</code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/system.html" class="external-link">system</a></span><span class="op">(</span><span class="st">"chmod 0600 .netrc"</span><span class="op">)</span></span></code></pre></div>
<p>After, check to ensure the file was created properly.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="st">".netrc"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] TRUE</span></span></code></pre>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="st">".netrc"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "machine urs.earthdata.nasa.gov login YOUR_USERNAME password YOUR_PASSWORD"</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="urs_cookies">
<code>.urs_cookies</code><a class="anchor" aria-label="anchor" href="#urs_cookies"></a>
</h3>
<p>The following commands create the <code>.urs_cookies</code> file.</p>
<p>First, set your working directory to the home directory.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="st">"~/"</span><span class="op">)</span></span></code></pre></div>
<p>Create a file named <code>.netrc</code> with
<code>file.create</code>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.create</a></span><span class="op">(</span><span class="st">".urs_cookies"</span><span class="op">)</span></span></code></pre></div>
<p>After, check to ensure the file was created properly.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="st">".urs_cookies"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] TRUE</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="dodsrc">
<code>.dodsrc</code><a class="anchor" aria-label="anchor" href="#dodsrc"></a>
</h3>
<p>The following commands create the <code>.urs_cookies</code> file.</p>
<p>First, set your working directory to the home directory.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="st">"~/"</span><span class="op">)</span></span></code></pre></div>
<p>Create a file named “.dodsrc” with <code>file.create</code>.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.create</a></span><span class="op">(</span><span class="st">".dodsrc"</span><span class="op">)</span></span></code></pre></div>
<p>Open a connection to <code>.dodsrc</code> with <code>sink</code>.
Write the lines beginning with <code>HTTP.</code>, replacing
<code>YOUR_USERNAME</code> and <code>YOUR_PASSWORD</code> with your NASA
EarthData username and password, respectively. After writing the line,
close the connection with <code>sink</code> again.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/sink.html" class="external-link">sink</a></span><span class="op">(</span><span class="st">".dodsrc"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span></span>
<span>    <span class="st">"HTTP.NETRC=YOUR_HOME_DIRECTORY/.netrc\n"</span>,</span>
<span>    <span class="st">"HTTP.COOKIE.JAR=YOUR_HOME_DIRECTORY/.urs_cookies"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sink.html" class="external-link">sink</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>After, check to ensure the file was created properly.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="st">".dodsrc"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] TRUE</span></span></code></pre>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="st">".dodsrc"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "HTTP.NETRC=YOUR_HOME_DIRECTORY/.netrc"           </span></span>
<span><span class="co">## [2] "HTTP.COOKIE.JAR=YOUR_HOME_DIRECTORY/.urs_cookies"</span></span></code></pre>
<p>It is important to ensure that these commands, as well as your
username, password, and home directory, are typed without error, as a
single problem with any of these files will result in a failed download.
If the files have been created correctly, the UN WPP-Adjusted population
density data from NASA Socioeconomic Data and Applications Center
(SEDAC) will be downloaded and unzipped without returning an error.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/download_data.html">download_data</a></span><span class="op">(</span></span>
<span>  dataset_name <span class="op">=</span> <span class="st">"sedac_population"</span>,</span>
<span>  year <span class="op">=</span> <span class="st">"2020"</span>,</span>
<span>  data_format <span class="op">=</span> <span class="st">"GeoTIFF"</span>,</span>
<span>  data_resolution <span class="op">=</span> <span class="st">"60 minute"</span>,</span>
<span>  directory_to_save <span class="op">=</span> <span class="st">"./sedac_population"</span>,</span>
<span>  acknowledgement <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  download <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  unzip <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  remove_zip <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  remove_command <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Downloading requested files...</span></span>
<span><span class="co">## Requested files have been downloaded.</span></span>
<span><span class="co">## Unzipping files...</span></span>
<span><span class="co">## Files unzipped and saved in ./sedac_population/.</span></span></code></pre>
<p>Check the downloaded data files.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="st">"./sedac_population"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "gpw_v4_population_density_adjusted_to_2015_unwpp_country_totals_rev11_2020_1_deg_tif_readme.txt"</span></span>
<span><span class="co">## [2] "gpw_v4_population_density_adjusted_to_2015_unwpp_country_totals_rev11_2020_1_deg_tif.zip"       </span></span>
<span><span class="co">## [3] "gpw_v4_population_density_adjusted_to_2015_unwpp_country_totals_rev11_2020_1_deg.tif"</span></span></code></pre>
<p>As indicated by the files in <code>./sedac_population</code>, the
data files have been downloaded properly.</p>
</div>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<ul>
<li>EOSDIS Distributed Active Archive Centers (DAAC). <em>National
Aeronautics and Space Administration (NASA)</em>. Date accessed: January
3, 2024. <a href="">https://www.earthdata.nasa.gov/eosdis/daacs</a>.</li>
<li>How to Generate Earthdata Prerequisite Files. <em>National
Aeronautics and Space Administration (NASA)</em>. Date accessed: January
3, 2024. <a href="">https://disc.gsfc.nasa.gov/information/howto?title=How%20to%20Generate%20Earthdata%20Prerequisite%20Files</a>.</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mitchell Manware, Insang Song, Eva Marques, Mariana Alifa Kassien, Kyle Messier.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
