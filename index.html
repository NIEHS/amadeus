<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>AMADEUS: A Machine for Data, Environments, and User Setup for common environmental and climate health datasets • amadeus</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="AMADEUS: A Machine for Data, Environments, and User Setup for common environmental and climate health datasets">
<meta name="description" content="A Mechanism/Machine for Data, Environments, and User Setup package for health and climate research. It is fully tested, versioned, and open source and open access.">
<meta property="og:description" content="A Mechanism/Machine for Data, Environments, and User Setup package for health and climate research. It is fully tested, versioned, and open source and open access.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">amadeus</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/download_functions.html">download_data and NASA EarthData Account</a></li>
    <li><a class="dropdown-item" href="articles/epa_download.html">Downloading EPA Daily Data</a></li>
  </ul>
</li>
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/NIEHS/amadeus/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="amadeus">amadeus<a class="anchor" aria-label="anchor" href="#amadeus"></a>
</h1></div>
<p><a href="https://github.com/NIEHS/amadeus/actions/workflows/check-standard.yaml" class="external-link"><img src="https://github.com/NIEHS/amadeus/actions/workflows/check-standard.yaml/badge.svg" alt="R-CMD-check"></a> <a href="https://github.com/NIEHS/amadeus/actions" class="external-link"><img src="https://NIEHS.github.io/amadeus/badges/coverage.svg" alt="cov"></a> <a href="https://github.com/NIEHS/amadeus/actions/workflows/lint.yaml" class="external-link"><img src="https://github.com/NIEHS/amadeus/actions/workflows/lint.yaml/badge.svg" alt="lint"></a> <a href="https://github.com/NIEHS/amadeus/actions/workflows/pkgdown.yaml" class="external-link"><img src="https://github.com/NIEHS/amadeus/actions/workflows/pkgdown.yaml/badge.svg" alt="pkgdown"></a> <a href="https://www.repostatus.org/#wip" class="external-link"><img src="https://www.repostatus.org/badges/latest/wip.svg" alt="Project Status: WIP – Initial development is in progress, but there has not yet been a stable, usable release suitable for the public."></a></p>
<p><code>amadeus</code> is <strong>a</strong> <strong>m</strong>ech<strong>a</strong>nism for <strong>d</strong>ata, <strong>e</strong>nvironments, and <strong>u</strong>ser <strong>s</strong>etup for common environmental and climate health datasets in R. <code>amadeus</code> has been developed to improve access to and utility with large scale, publicly available environmental data in R.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p><code>amadeus</code> is not yet available from CRAN, but it can be installed with the <code>devtools</code>, <code>remotes</code>, or <code>pak</code> packages.</p>
<pre><code><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"NIEHS/amadeus"</span><span class="op">)</span></span></code></pre>
<pre><code><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"NIEHS/amadeus"</span><span class="op">)</span></span></code></pre>
<pre><code><span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"NIEHS/amadeus"</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="contribution">Contribution<a class="anchor" aria-label="anchor" href="#contribution"></a>
</h2>
<p>To add or edit functionality for new data sources or datasets, open a <a href="https://github.com/NIEHS/amadeus/pulls" class="external-link">Pull request</a> into the main branch with a detailed description of the proposed changes. Pull requests must pass all status checks, and then will be approved or rejected by <code>amadeus</code>’s authors.</p>
<p>Utilize <a href="https://github.com/NIEHS/amadeus/issues" class="external-link">Issues</a> to notify the authors of bugs, questions, or recommendations. Identify each issue with the appropriate label to help ensure a timely response.</p>
<div align="center">
<p><img src="articles/images/readme_issues.png" style="width: 100%;"></p>
</div>
</div>
<div class="section level2">
<h2 id="download">Download<a class="anchor" aria-label="anchor" href="#download"></a>
</h2>
<p><code>download_data</code> accesses and downloads raw geospatial data from a variety of open source data repositories. The function is a wrapper that calls source-specific download functions, each of which account for the source’s unique combination of URL, file naming conventions, and data types. Download functions cover the following sources:</p>
<table class="table">
<colgroup>
<col width="33%">
<col width="33%">
<col width="33%">
</colgroup>
<thead><tr class="header">
<th align="left">Source</th>
<th align="left">Data Type</th>
<th align="left">Genre</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><a href="https://www.climatologylab.org/terraclimate.html" class="external-link">Climatology Lab TerraClimate</a></td>
<td align="left">netCDF</td>
<td align="left">Climate, Water</td>
</tr>
<tr class="even">
<td align="left"><a href="https://www.climatologylab.org/gridmet.html" class="external-link">Climatology Lab GridMet</a></td>
<td align="left">netCDF</td>
<td align="left">Meteorology</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://www.nature.com/articles/sdata2018214" class="external-link">Köppen-Geiger Climate Classification (Beck et al., 2018)</a></td>
<td align="left">GeoTIFF</td>
<td align="left">Climate Classification</td>
</tr>
<tr class="even">
<td align="left"><a href="https://www.mrlc.gov/data" class="external-link">MRLC Consortium National Land Cover Database (NLCD)</a></td>
<td align="left">GeoTIFF</td>
<td align="left">Land Use</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://modis.gsfc.nasa.gov/data/" class="external-link">NASA Moderate Resolution Imaging Spectroradiometer (MODIS)</a></td>
<td align="left">HDF</td>
<td align="left">Atmosphere, Meteorology, Land Use, Satellite</td>
</tr>
<tr class="even">
<td align="left"><a href="https://www.nature.com/articles/sdata2018214" class="external-link">NASA Modern-Era Retrospective analysis for Research and Applications, Version 2 (MERRA-2)</a></td>
<td align="left">netCDF</td>
<td align="left">Atmosphere, Meteorology</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://sedac.ciesin.columbia.edu/data/set/gpw-v4-population-density-adjusted-to-2015-unwpp-country-totals-rev11" class="external-link">NASA SEDAC UN WPP-Adjusted Population Density</a></td>
<td align="left">GeoTIFF, netCDF</td>
<td align="left">Population</td>
</tr>
<tr class="even">
<td align="left"><a href="https://sedac.ciesin.columbia.edu/data/set/groads-global-roads-open-access-v1/data-download" class="external-link">NASA SEDAC Global Roads Open Access Data Set</a></td>
<td align="left">Shapefile, Geodatabase</td>
<td align="left">Roadways</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://gmao.gsfc.nasa.gov/GEOS_systems/" class="external-link">NASA Goddard Earth Observing System Composition Forcasting (GEOS-CF)</a></td>
<td align="left">netCDF</td>
<td align="left">Atmosphere, Meteorology</td>
</tr>
<tr class="even">
<td align="left"><a href="https://www.ospo.noaa.gov/Products/land/hms.html#0" class="external-link">NOAA Hazard Mapping System Fire and Smoke Product</a></td>
<td align="left">Shapefile, KML</td>
<td align="left">Wildfire Smoke</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://psl.noaa.gov/data/gridded/data.narr.html" class="external-link">NOAA NCEP North American Regional Reanalysis (NARR)</a></td>
<td align="left">netCDF</td>
<td align="left">Atmosphere, Meteorology</td>
</tr>
<tr class="even">
<td align="left"><a href="https://aqs.epa.gov/aqsweb/airdata/download_files.html" class="external-link">US EPA Air Data Pre-Generated Data Files</a></td>
<td align="left">CSV</td>
<td align="left">Air Pollution</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://www.epa.gov/eco-research/ecoregion" class="external-link">US EPA Ecoregions</a></td>
<td align="left">Shapefile</td>
<td align="left">Climate Regions</td>
</tr>
<tr class="even">
<td align="left"><a href="https://www.usgs.gov/coastal-changes-and-impacts/gmted2010" class="external-link">USGS Global Multi-resolution Terrain Elevation Data (GMTED2010)</a></td>
<td align="left">ESRI ASCII Grid</td>
<td align="left">Elevation</td>
</tr>
</tbody>
</table>
<p>See the “download_data and NASA EarthData Account” vignette for a detailed description of source-specific download functions.</p>
<p>Example use of <code>download_data</code> using NOAA NCEP North American Regional Reanalysis’s (NARR) “weasd” (Daily Accumulated Snow at Surface) variable.</p>
<pre><code>&gt; directory &lt;- "/  EXAMPLE  /  FILE  /  PATH  /"
&gt; download_data(
+   dataset_name = "narr_monolevel",
+   year_start = 2022,
+   year_end = 2022,
+   variable = "weasd",
+   directory_to_save = directory,
+   acknowledgement = TRUE,
+   download = TRUE
+ )
Downloading requested files...
Requested files have been downloaded.
&gt; list.files(paste0(directory, "weasd"))
[1] "weasd.2022.nc"</code></pre>
</div>
<div class="section level2">
<h2 id="process">Process<a class="anchor" aria-label="anchor" href="#process"></a>
</h2>
<p><code>process_covariates</code> imports and cleans raw geospatial data (downloaded with <code>download_data</code>), and returns a single <code>SpatRaster</code> or <code>SpatVector</code> into the user’s R environment. <code>process_covariates</code> “cleans” the data by defining interpretable layer names, ensuring a coordinate reference system is present, and managing `timedata (if applicable).</p>
<p>To avoid errors when using <code>process_covariates</code>, <strong>do not edit the raw downloaded data files</strong>. Passing user-generated or edited data into <code>process_covariates</code> may result in errors as the underlying functions are adapted to each sources’ raw data file type.</p>
<p>Example use of <code>process_covariates</code> using the downloaded “weasd” data.</p>
<pre><code>&gt; weasd &lt;- process_covariates(
+   covariate = "narr",
+   date = c("2022-01-01", "2022-01-05"),
+   variable = "weasd",
+   path = paste0(directory, "weasd")
+ )
Cleaning weasd data for January, 2022...
Detected monolevel data...
Returning daily weasd data from 2022-01-01 to 2022-01-05.
&gt; weasd
class       : SpatRaster
dimensions  : 277, 349, 5  (nrow, ncol, nlyr)
resolution  : 32462.99, 32463  (x, y)
extent      : -16231.49, 11313351, -16231.5, 8976020  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=lcc +lat_0=50 +lon_0=-107 +lat_1=50 +lat_2=50 +x_0=5632642.22547 +y_0=4612545.65137 +datum=WGS84 +units=m +no_defs
source      : weasd.2022.nc:weasd
varname     : weasd (Daily Accumulated Snow at Surface)
names       : weasd_20220101, weasd_20220102, weasd_20220103, weasd_20220104, weasd_20220105
unit        :         kg/m^2,         kg/m^2,         kg/m^2,         kg/m^2,         kg/m^2
time        : 2022-01-01 to 2022-01-05 UTC</code></pre>
</div>
<div class="section level2">
<h2 id="calculate-covariates">Calculate Covariates<a class="anchor" aria-label="anchor" href="#calculate-covariates"></a>
</h2>
<p><code>calc_covariates</code> stems from the <code>beethoven</code> package’s need for various types of data extracted at precise locations. <code>calc_covariates</code>, therefore, extracts data from the “cleaned” <code>SpatRaster</code> or <code>SpatVector</code> object at user defined locations. Users can choose to buffer the locations. The function returns a <code>data.frame</code> with data extracted at all locations for each layer or row in the <code>SpatRaster</code> or <code>SpatVector</code> object, respectively.</p>
<p>Example of <code>calc_covariates</code> using processed “weasd” data.</p>
<pre><code>&gt; locs &lt;- data.frame(lon = -78.8277, lat = 35.95013)
&gt; locs$id &lt;- "0001"
&gt; weasd_covar &lt;- calc_covariates(
+   covariate = "narr",
+   from = weasd_process,
+   locs = locs,
+   locs_id = "id",
+   radius = 0,
+   geom = FALSE
+ )
Detected `data.frame` extraction locations...
Calculating weasd covariates for 2022-01-01...
Calculating weasd covariates for 2022-01-02...
Calculating weasd covariates for 2022-01-03...
Calculating weasd covariates for 2022-01-04...
Calculating weasd covariates for 2022-01-05...
Returning extracted covariates.
&gt; weasd_covar
    id       time     weasd_0
1 0001 2022-01-01 0.000000000
2 0001 2022-01-02 0.000000000
3 0001 2022-01-03 0.000000000
4 0001 2022-01-04 0.000000000
5 0001 2022-01-05 0.001953125</code></pre>
</div>
<div class="section level2">
<h2 id="additional-resources">Additional Resources<a class="anchor" aria-label="anchor" href="#additional-resources"></a>
</h2>
<p>The following R packages can also be used to access climate and weather data in R, but each differs from <code>amadeus</code> in the data sources covered or type of functionality provided.</p>
<table class="table">
<colgroup>
<col width="40%">
<col width="60%">
</colgroup>
<thead><tr class="header">
<th align="left">Package</th>
<th align="left">Source</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><a href="https://cran.r-project.org/web/packages/dataRetrieval/index.html" class="external-link"><code>dataRetrieval</code></a></td>
<td align="left">
<a href="https://www.usgs.gov/mission-areas/water-resources/data" class="external-link">USGS Hydrological Data</a> and <a href="https://www.epa.gov/waterdata/water-quality-data" class="external-link">EPA Water Quality Data</a>
</td>
</tr>
<tr class="even">
<td align="left"><a href="https://cran.r-project.org/web/packages/daymetr/index.html" class="external-link"><code>daymetr</code></a></td>
<td align="left"><a href="https://daac.ornl.gov/cgi-bin/dataset_lister.pl?p=32" class="external-link">Daymet</a></td>
</tr>
<tr class="odd">
<td align="left"><a href="https://cran.r-project.org/web/packages/ecmwfr/index.html" class="external-link"><code>ecmwfr</code></a></td>
<td align="left"><a href="https://www.ecmwf.int/en/forecasts/dataset/ecmwf-reanalysis-v5" class="external-link">ECMWF Reanalysis v5 (ERA5)</a></td>
</tr>
<tr class="even">
<td align="left">
<a href="https://github.com/hllauca/RClimChange/" class="external-link"><code>RClimChange</code></a><a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;Last updated more than two years ago.&lt;/p&gt;"><sup>1</sup></a>
</td>
<td align="left"><a href="https://www.nccs.nasa.gov/services/data-collections/land-based-products/nex-gddp-cmip6" class="external-link">NASA Earth Exchange Global Daily Downscaled Projections (NEX-GDDP-CMIP6)</a></td>
</tr>
<tr class="odd">
<td align="left"><a href="https://cran.r-project.org/web/packages/rNOMADS/" class="external-link"><code>rNOMADS</code></a></td>
<td align="left"><a href="https://nomads.ncep.noaa.gov/" class="external-link">NOAA Operational Model Archive and Distribution System</a></td>
</tr>
<tr class="even">
<td align="left">
<a href="https://github.com/ranghetti/sen2r" class="external-link"><code>sen2r</code></a><a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;Archived; no longer maintained.&lt;/p&gt;"><sup>2</sup></a>
</td>
<td align="left"><a href="https://sentinels.copernicus.eu/web/sentinel/missions/sentinel-2" class="external-link">Sentinel-2</a></td>
</tr>
</tbody>
</table>
</div>
</div>


  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/NIEHS/amadeus/" class="external-link">Browse source code</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing amadeus</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Kyle Messier <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-9508-9623" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Mitchell Manware <br><small class="roles"> Author, contributor </small> <a href="https://orcid.org/0009-0003-6440-6106" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Insang Song <br><small class="roles"> Author, contributor </small> <a href="https://orcid.org/0000-0001-8732-3256" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Eva Marques <br><small class="roles"> Author, contributor </small> <a href="https://orcid.org/0000-0001-9817-6546" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Mariana Alifa Kassien <br><small class="roles"> Author, contributor </small> <a href="https://orcid.org/0000-0003-2295-406X" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Ranadeep Daw <br><small class="roles"> Author, contributor </small> <a href="https://orcid.org/0000-0003-3590-909X" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Daniel Zilber <br><small class="roles"> Author, contributor </small> <a href="https://orcid.org/0000-0002-4387-0271" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Kyle Messier, Mitchell Manware, Insang Song, Eva Marques, Mariana Alifa Kassien, Ranadeep Daw, Daniel Zilber.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
