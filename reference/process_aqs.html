<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Process U.S. EPA AQS daily CSV data — process_aqs • amadeus</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Process U.S. EPA AQS daily CSV data — process_aqs"><meta name="description" content='The process_aqs() function cleans and imports raw air quality
monitoring sites from pre-generated daily CSV files, returning a single
SpatVector or sf object.
date is used to filter the raw data read from csv files.
Filtered rows are then processed according to mode argument.
Some sites report multiple measurements per day with and without
exceptional events
the internal procedure of this function keeps "Included" if there
are multiple event types per site-time.'><meta property="og:description" content='The process_aqs() function cleans and imports raw air quality
monitoring sites from pre-generated daily CSV files, returning a single
SpatVector or sf object.
date is used to filter the raw data read from csv files.
Filtered rows are then processed according to mode argument.
Some sites report multiple measurements per day with and without
exceptional events
the internal procedure of this function keeps "Included" if there
are multiple event types per site-time.'><meta property="og:image" content="https://niehs.github.io/amadeus/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">amadeus</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/download_functions.html">download_data</a></li>
    <li><a class="dropdown-item" href="../articles/epa_download.html">Downloading EPA Daily Data</a></li>
    <li><a class="dropdown-item" href="../articles/protected_datasets.html">Protected Data Sources</a></li>
    <li><a class="dropdown-item" href="../articles/workflow.html">amadeus workflow</a></li>
  </ul></li>
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/NIEHS/amadeus/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Process U.S. EPA AQS daily CSV data</h1>
      <small class="dont-index">Source: <a href="https://github.com/NIEHS/amadeus/blob/main/R/process.R" class="external-link"><code>R/process.R</code></a></small>
      <div class="d-none name"><code>process_aqs.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The <code>process_aqs()</code> function cleans and imports raw air quality
monitoring sites from pre-generated daily CSV files, returning a single
<code>SpatVector</code> or <code>sf</code> object.
<code>date</code> is used to filter the raw data read from csv files.
Filtered rows are then processed according to <code>mode</code> argument.
Some sites report multiple measurements per day with and without
<a href="https://www.epa.gov/sites/default/files/2016-10/documents/exceptional_events.pdf" class="external-link">exceptional events</a>
the internal procedure of this function keeps "Included" if there
are multiple event types per site-time.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">process_aqs</span><span class="op">(</span></span>
<span>  path <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2018-01-01"</span>, <span class="st">"2022-12-31"</span><span class="op">)</span>,</span>
<span>  mode <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"date-location"</span>, <span class="st">"available-data"</span>, <span class="st">"location"</span><span class="op">)</span>,</span>
<span>  data_field <span class="op">=</span> <span class="st">"Arithmetic.Mean"</span>,</span>
<span>  return_format <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"terra"</span>, <span class="st">"sf"</span>, <span class="st">"data.table"</span><span class="op">)</span>,</span>
<span>  extent <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-path">path<a class="anchor" aria-label="anchor" href="#arg-path"></a></dt>
<dd><p>character(1). Directory path to daily measurement data.</p></dd>


<dt id="arg-date">date<a class="anchor" aria-label="anchor" href="#arg-date"></a></dt>
<dd><p>character(2). Start and end date.
Should be in <code>"YYYY-MM-DD"</code> format and sorted.</p></dd>


<dt id="arg-mode">mode<a class="anchor" aria-label="anchor" href="#arg-mode"></a></dt>
<dd><p>character(1). One of</p><ul><li><p>"date-location" (all dates * all locations)</p></li>
<li><p>"available-data" (date-location pairs with available data)</p></li>
<li><p>"location" (unique locations).</p></li>
</ul></dd>


<dt id="arg-data-field">data_field<a class="anchor" aria-label="anchor" href="#arg-data-field"></a></dt>
<dd><p>character(1). Data field to extract.</p></dd>


<dt id="arg-return-format">return_format<a class="anchor" aria-label="anchor" href="#arg-return-format"></a></dt>
<dd><p>character(1). <code>"terra"</code> or <code>"sf"</code> or <code>"data.table"</code>.</p></dd>


<dt id="arg-extent">extent<a class="anchor" aria-label="anchor" href="#arg-extent"></a></dt>
<dd><p>numeric(4). Spatial extent of the resulting object.
The order should be <code>c(xmin, xmax, ymin, ymax)</code>.
The coordinate system should be WGS84 (EPSG:4326).</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Placeholders.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a SpatVector, sf, or data.table object depending on the <code>return_format</code></p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>Choose <code>date</code> and <code>mode</code> values with caution.
The function may return a massive data.table depending on the time range,
resulting in a long processing time or even a crash if data is too large
for your computing environment to process.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index">
<ul><li><p><code><a href="download_aqs.html">download_aqs()</a></code></p></li>
<li><p><a href="https://aqs.epa.gov/aqsweb/documents/codetables/parameters.csv" class="external-link">EPA, n.d., <em>AQS Parameter Codes</em></a></p></li>
</ul></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">aqs</span> <span class="op">&lt;-</span> <span class="fu">process_aqs</span><span class="op">(</span></span></span>
<span class="r-in"><span>  path <span class="op">=</span> <span class="st">"./data/aqs_daily_example.csv"</span>,</span></span>
<span class="r-in"><span>  date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2022-12-01"</span>, <span class="st">"2023-01-31"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  mode <span class="op">=</span> <span class="st">"full"</span>,</span></span>
<span class="r-in"><span>  return_format <span class="op">=</span> <span class="st">"terra"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mitchell Manware, Insang Song, Eva Marques, Mariana Alifa Kassien, Kyle Messier.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

